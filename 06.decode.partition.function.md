#### Decode Partition Function

~~~~~
decode_partition( r, c, bSize ) {
    if ( r >= MiRows || c >= MiCols )
        return 0
    num8x8 = num_8x8_blocks_wide_lookup[ bSize ]
    halfBlock8x8 = num8x8 >> 1
    hasRows = ( r + halfBlock8x8 ) < MiRows
    hasCols = ( c + halfBlock8x8 ) < MiCols
    if (bSize < BLOCK_8X8) {
        partition = PARTITION_NONE
    } else if ( hasRows && hasCols )
        @@partition                                                          S
    } else if ( hasCols ) {
        @@split_or_horz                                                      S
        partition = split_or_horz ? PARTITION_SPLIT : PARTITION_HORZ
    } else if ( hasRows ) {
        @@split_or_vert                                                      S
        partition = split_or_vert ? PARTITION_SPLIT : PARTITION_VERT
    } else {
        partition = PARTITION_SPLIT
    }
    subSize = subsize_lookup[ partition ][ bSize ]
    if ( partition == PARTITION_NONE ) {
        decode_block( r, c, subSize )
    } else if ( partition == PARTITION_HORZ ) {
        decode_block( r, c, subSize )
        if ( hasRows )
            decode_block( r + halfBlock8x8, c, subSize )
    } else if ( partition == PARTITION_VERT ) {
        decode_block( r, c, subSize )
        if ( hasCols )
            decode_block( r, c + halfBlock8x8, subSize )
    } else {
        decode_partition( r, c, subSize )
        decode_partition( r, c + halfBlock8x8, subSize )
        decode_partition( r + halfBlock8x8, c, subSize )
        decode_partition( r + halfBlock8x8, c + halfBlock8x8, subSize )
    }
}
~~~~~
{:.syntax }
