#### TX Size Syntax

<div class="syntax">
read_tx_size( allowSelect ) {
    largestTxSize = tx_mode_to_biggest_tx_size[ TxMode ]
    maxTxSize = max_tx_size_lookup[ MiSize ]
    maxRectTxSize = max_tx_size_rect_lookup[ MiSize ]
    maxCodedTxSize = maxTxSize + rect_tx_allowed[ MiSize ]
    if ( MiSize > BLOCK_4X4 ) {
        if ( allowSelect && TxMode == TX_MODE_SELECT ) {
            @@tx_size                                                      S
            if (tx_size > maxTxSize )
                tx_size = maxRectTxSize
        } else {
            if ( tx_size_sqr_up_map[ maxRectTxSize ] <= largestTxSize )
                tx_size = maxRectTxSize
            else
                tx_size = largestTxSize
        }
    } else {
        tx_size = maxRectTxSize
    }
}
</div>

The max_tx_size_lookup table is defined as:

~~~~~ c
max_tx_size_lookup[ BLOCK_SIZES ] = {
    TX_4X4, TX_4X4, TX_4X4,
    TX_8X8, TX_8X8, TX_8X8,
    TX_16X16, TX_16X16, TX_16X16,
    TX_32X32, TX_32X32, TX_32X32, TX_32X32,
}
~~~~~

The max_tx_size_rect_lookup table is defined as:

~~~~~ c
max_tx_size_rect_lookup[ BLOCK_SIZES ] = {
  TX_4X4,   TX_4X8,   TX_8X4,
  TX_8X8,   TX_8X16,  TX_16X8,
  TX_16X16, TX_16X32, TX_32X16,
  TX_32X32, TX_32X32, TX_32X32,
  TX_32X32,
}
~~~~~

The rect_tx_allowed table is defined as:

~~~~~ c
rect_tx_allowed[BLOCK_SIZES] = {
  0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0
};
~~~~~